<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0,user-scalable=0"/>
  <title>客户标签</title>
  <link rel="stylesheet" type="text/css" href="./src/css/index.css">
  <link rel="stylesheet" href="./src/css/CustomerTag.css">
</head>
<body>
<!-- 顶部状态栏 start -->
<div class="page-status-bar text-center">
  <div class="state-bar__cancel cancel_customerTag text-secondary">取消</div>
  <span class="font-weight-medium">客户标签</span>
  <div class="state-bar__save save_customerTag">保存</div>
</div>
<!-- 顶部状态栏 end -->
<div class="customer-tag">
  <div class="page-container">
    <!-- 上方标签列表 start -->
    <div class="card tag-list hide">
    </div>

    <!-- 无数据 通过hide类名控制显隐 -->
    <div class="card tag-list--nodata hide">
      <img src="./src/icons/icon-face-cry.svg" alt="哭脸">
      暂无客户标签
    </div>
    <!-- 上方标签列表 start -->

    <div class="card tag-details">
    </div>
  </div>

  <div class="float-layout hidden">
    <div class="float-layout__mask"></div>
    <div class="float-layout__main">
      <div class="float-layout__title">
        <div class="font-weight-medium title">标题</div>
<!--        <div class="text-link float-layout__save">保存</div>-->
      </div>

      <div class="float-layout__content">
      </div>
    </div>
  </div>
</div>
<div class="customer-error" hide>
  <!--    <div class="page-status-bar text-center">-->
  <!--      <div class="state-bar__cancel text-secondary">取消</div>-->
  <!--      <span class="text-title font-weight-medium">不是会员</span>-->
  <!--    </div>-->
  <!-- 顶部状态栏 end -->

  <!-- 不是会员 start -->
  <div class="page-container page-container--no-data">
    <img src="./src/images/not-vip.png" alt="not-vip">
    <div class="text-secondary font-size-small line-height-small customer-errormsg"></div>
  </div>
  <!-- 不是会员 end -->
</div>
<script src="./src/lib/jquery-1.7.1.min.js"></script>
<script src="./src/lib/rolldate.min.js"></script>
<script src="./src/index.js"></script>
<script type="text/javascript" src="../js/common.js"></script>
<script>

  $('.tag-details__edit').click(function () {
    $('.float-layout').removeClass('hidden')
    $('.float-textarea').removeClass('hide')
  })
  // $('.float-layout__save').click(function () {
  //   $('.float-layout').addClass('hidden')
  // })
  $('.cancel_customerTag').click(function () {
    var host = "ecrp://send?params="
    var params = '{"type":-1}'
    window.location.href = host+params
  })
  window.onload = function () {
    getCustomerTag()
  }
  var appendHtml = {}
  let wxId = getPar('wxId')
  let chatId = getPar('chatId')
  var customerId = null   // 客户Id
  var platfrom = null     // 平台Id
  var nick = null         // 平台对应唯一标识
  var shopId = null       // 店铺Id
  var groupId = null      // 集团Id
  var tagcode = null      // 标签Id
  var tagName = null      // 标签名称
  var chooseTagType = null  // 选择标签类型
  //获取客户已打标签
  function getCustomerTag() {
    this.ajax(backstageURL() + '/guideCustomer/customerTag', {
      wxId: wxId,
      chatId: chatId,
    }).then(function (result) {
      if (result.success) {
        // 客户已有标签
        let propertyInfoVos = result.result.propertyInfoVos
        let platformInfos = result.result.platformInfos
        if(platformInfos.length > 0){
          platfrom = platformInfos[0].platform
          nick = platformInfos[0].outNick
        }
        customerId = result.result.customerId
        shopId = result.result.shopId
        groupId = result.result.groupId
        if (propertyInfoVos.length < 1) {
          $(".tag-list--nodata").removeClass('hide')
          $(".tag-list").addClass('hide')
        }else {
          $(".tag-list--nodata").addClass('hide')
          $(".tag-list").removeClass('hide')
          for (var i = 0; i < propertyInfoVos.length; i++) {
            let propertyInfoVo = propertyInfoVos[i]
            var html = '<div class="tag tag&#45;&#45;primary customer_'+propertyInfoVo.tagArr+'">' + propertyInfoVo.name + ':' + propertyInfoVo.value + '</div>'
            $(".tag-list").append(html)
          }
        }
        getGroupTag()
      }else {
        // 跳转错误页
        // 跳转错误页
        $(".customer-tag").hide()
        $(".save_customerTag").hide()
        $(".customer-errormsg").html(result.result)
        $(".customer-error").show()
      }
    })
  }
  //获取集团标签标签
  function getGroupTag() {
    this.ajax(backstageURL() + '/guideCustomer/customerTag', {
      wxId: wxId,
      chatId: chatId,
    }).then(function (result) {
      if (result.success) {
        let propertyInfoVos = result.result.propertyInfoVos
        let platformInfos = result.result.platformInfos
        if(platformInfos.length > 0){
          platfrom = platformInfos[0].platform
          nick = platformInfos[0].outNick
        }
        customerId = result.result.customerId
        shopId = result.result.shopId
        groupId = result.result.groupId
        // 店铺标签列表
        let propertyInfos = result.result.propertyInfos
        if (propertyInfos.length > 1){
          for (let i = 0; i < propertyInfos.length; i++) {
            let propertyInfo = propertyInfos[i]
            let tagType = propertyInfo.tagType
            let show = propertyInfo.isShow
            let id = propertyInfo.id
            let unit = propertyInfo.unit
            if (!unit){
              unit = ''
            }
            let showClass
            if (show == 1) {
              showClass = "text-link"
            }else if (show == 0) {
              showClass = "text-disable"
            }
            showClass = "text-link"
            var html
            // 判断标签类型
            if (tagType==1) {//字符文本框
              html =  '<div class="tag-details__item" tagAttr="'+propertyInfo.tagArr+'" tagType="'+tagType+'" tagName="'+propertyInfo.name+'">'+
                        '<div class="tag-details__title">'+propertyInfo.name +'</div>'+
                        '<div class="tag-details__tags tag-flex tag-details__edit">'
              //获取已选标签
              let tagged = ''
              for (var j = 0; j < propertyInfoVos.length; j++) {
                let propertyInfoVo = propertyInfoVos[j]
                if (propertyInfo.tagArr == propertyInfoVo.tagArr){
                  tagged =  propertyInfoVo.value
                }
              }
              if (tagged != ''){
                html += '<label><input type="text" placeholder="" value="'+tagged+'" /></label>'
              }else {
                html += '<label><input type="text" placeholder="请输入'+propertyInfo.name +'" value="" /></label>'
              }
              html +=  '<div class="text-title tag-flex">'+unit+
                        '</div>' +
                        '</div>'+
                        '</div>'
            } else if (tagType==2) {//数字文本框
              html =  '<div class="tag-details__item" tagAttr="'+propertyInfo.tagArr+'" tagType="'+tagType+'" tagName="'+propertyInfo.name+'">'+
                      '<div class="tag-details__title">'+propertyInfo.name +'</div>'+
                      '<div class="tag-details__tags tag-flex tag-details__edit">'
              //获取已选标签
              let tagged = ''
              for (var j = 0; j < propertyInfoVos.length; j++) {
                let propertyInfoVo = propertyInfoVos[j]
                if (propertyInfo.tagArr == propertyInfoVo.tagArr){
                  tagged =  propertyInfoVo.value
                }
              }
              if (tagged != ''){
                html += '<label><input type="text" placeholder="" oninput="value=value.replace(/[^\\d]/g,\'\')" value="'+tagged+'" /></label>'
              }else {
                html += '<label><input type="text" placeholder="请输入'+propertyInfo.name +'" oninput="value=value.replace(/[^\\d]/g,\'\')" value="" /></label>'
              }
              html +=  '<div class="text-title tag-flex">'+unit+
                        '</div>' +
                        '</div>'+
                        '</div>'
            } else if (tagType==3) {//小数文本框
              html =  '<div class="tag-details__item" tagAttr="'+propertyInfo.tagArr+'" tagType="'+tagType+'" tagName="'+propertyInfo.name+'">'+
                      '<div class="tag-details__title">'+propertyInfo.name +'</div>'+
                      '<div class="tag-details__tags tag-flex tag-details__edit">'
              //获取已选标签
              let tagged = ''
              for (var j = 0; j < propertyInfoVos.length; j++) {
                let propertyInfoVo = propertyInfoVos[j]
                if (propertyInfo.tagArr == propertyInfoVo.tagArr){
                  tagged =  propertyInfoVo.value
                }
              }
              if (tagged != ''){
                html += '<label><input type="text" placeholder="" oninput="value=value.replace(/[^0-9\\.]/g,\'\')" value="'+tagged+'" /></label>'
              }else {
                html += '<label><input type="text" placeholder="请输入'+propertyInfo.name +'" oninput="value=value.replace(/[^0-9\\.]/g,\'\')" value="" /></label>'
              }
              html +=  '<div class="text-title tag-flex">'+unit+
                        '</div>' +
                        '</div>'+
                        '</div>'
            } else if (tagType == 4) {//选择框
              var popupHtml = ''
              html = '<div class="tag-details__item tag-details__edit_'+id+'" attr="'+id+'" tagAttr="'+propertyInfo.tagArr+'" tagType="'+tagType+'" tagName="'+propertyInfo.name+'">'+
                        '<div class="tag-details__title">'+
                          propertyInfo.name+
                        '</div>'+
                        '<div class="tag-details__tags tag-flex tag-details__edit">'
              let value = propertyInfo.value
              let split = value.split("|");
              popupHtml += "<div class='float-select float-select_"+id+"'>"
              let tagged = ''
              for (let j = 1; j < split.length - 1; j++) {
                //获取已选标签
                let bool = false
                for (var m = 0; m < propertyInfoVos.length; m++) {
                  let propertyInfoVo = propertyInfoVos[m]
                  if (propertyInfo.tagArr != propertyInfoVo.tagArr){
                    continue
                  }
                  if (propertyInfoVo.value == split[j]){
                    tagged = propertyInfoVo.value
                    bool= true
                    break
                  }
                }
                if (bool){
                  popupHtml += "<div class='float-select__item float-select__item--selected'>" +
                    "<div class='float-select__content'><input type='radio' class='input_radio' name='chooseTag' value='"+split[j]+"' checked>"+split[j]+"</div>"+
                    "<img class='float-select__icon' hide src='./src/icons/icon-radio.svg' alt='radio'>"+
                    "</div>"
                }else {
                  popupHtml += "<div class='float-select__item'>" +
                    "<div class='float-select__content'><input type='radio' class='input_radio' name='chooseTag' value='"+split[j]+"'>"+split[j]+"</div>"+
                    "<img class='float-select__icon' hide src='./src/icons/icon-radio.svg' alt='radio'>"+
                    "</div>"
                }
              }
              if (tagged != ''){
                html += '<div class="text-title select_tag_'+id+'">'+tagged+'</div>'+
                        '<input type="text" class="input_select_tag_'+id+'" value="'+tagged+'" hidden>'
              }else {
                html += '<div class="text-title text-disable select_tag_'+id+'">请选择'+propertyInfo.name+'</div>'+
                        '<input type="text" class="input_select_tag_'+id+'" value="" hidden>'
              }
              html+=  '<div class="right-arrow '+showClass+'"></div>'+
                      '</div>'+
                      '</div>'
              popupHtml += "</div>"
              appendHtml[id] = popupHtml
            } else if (tagType==5) {//日期框
              html = '<div class="tag-details__item" tagAttr="'+propertyInfo.tagArr+'" tagType="'+tagType+'" tagName="'+propertyInfo.name+'"  id="editDate_'+id+'">'+
                      '<div class="tag-details__title">'+
                          propertyInfo.name+
                      '</div>'+
                      '<div class="tag-details__tags tag-flex">'
              //获取已选标签
              let tagged = ''
              for (var j = 0; j < propertyInfoVos.length; j++) {
                let propertyInfoVo = propertyInfoVos[j]
                if (propertyInfo.tagArr == propertyInfoVo.tagArr){
                  tagged =  propertyInfoVo.value
                  tagged = tagged.substr(0,19)
                }
              }
              if (tagged != ''){
                html += '<div class="text-title customer_tag_date editDate_'+id+'">'+tagged+'</div>'
                        // '<input type="date" name="date" class="input_editDate_'+id+'" value="'+tagged+'" hidden>'
              }else {
                html += '<div class="text-title text-disable customer_tag_date editDate_'+id+'">请选择'+propertyInfo.name+'</div>'
                        // '<input type="text" name="date" class="input_editDate_'+id+'" value="" hidden>'
              }
              html += '<div class="right-arrow"></div>'+
                      '</div>'+
                      '</div>'
            } else if (tagType == 6) {//单选框
              html =  '<div class="tag-details__item tag-details__item--smallSpace" tagAttr="'+propertyInfo.tagArr+'" tagType="'+tagType+'" tagName="'+propertyInfo.name+'">'+
                        '<div class="tag-details__title">'+
                          propertyInfo.name+
                        '</div>'+
                        '<div class="tag-details__tags tag--cancelBlank">'
              let value = propertyInfo.value
              let split = value.split("|");
              for (let j = 1; j < split.length - 1; j++) {
                //获取已选标签
                let bool = false
                for (var m = 0; m < propertyInfoVos.length; m++) {
                  let propertyInfoVo = propertyInfoVos[m]
                  if (propertyInfo.tagArr != propertyInfoVo.tagArr){
                    continue
                  }
                  if (propertyInfoVo.value == split[j]){
                    bool= true
                  }
                }
                if (bool){
                  html += '<span class="tag tag--seleted input_radio_'+id+'"><input type="radio" name="chooseTag'+id+'" value="'+split[j]+'" hidden checked>'+split[j]+'</span>';
                }else {
                  html += '<span class="tag input_radio_'+id+'"><input type="radio" name="chooseTag'+id+'" value="'+split[j]+'" hidden>'+split[j]+'</span>';
                }
              }
              html+=  "</div>" +
                      "</div>"
            }else if (tagType == 7) {//复选框
              html =  '<div class="tag-details__item tag-details__item--smallSpace" tagAttr="'+propertyInfo.tagArr+'" tagType="'+tagType+'" tagName="'+propertyInfo.name+'">'+
                      '<div class="tag-details__title">'+
                          propertyInfo.name+'（复选）'+
                      '</div>'+
                      '<div class="tag-details__tags tag--cancelBlank">'
              let value = propertyInfo.value
              let split = value.split("|");
              for (let j = 1; j < split.length - 1; j++) {
                //获取已选标签
                let bool = false
                for (var m = 0; m < propertyInfoVos.length; m++) {
                  let propertyInfoVo = propertyInfoVos[m]
                  if (propertyInfo.tagArr != propertyInfoVo.tagArr){
                    continue
                  }
                  let propertyInfos = propertyInfoVo.value.split("|")
                  for (let k = 0; k < propertyInfos.length; k++) {
                    if (propertyInfos[k] == split[j]){
                      bool= true
                    }
                  }
                }
                if (bool){
                  html += '<span class="tag tag--seleted input_checkbox"><input type="checkbox" value="'+split[j]+'" hidden checked>'+split[j]+'</span>'
                }else {
                  html += '<span class="tag input_checkbox"><input type="checkbox" value="'+split[j]+'" hidden>'+split[j]+'</span>'
                }
              }
              html+="      </div>" +
                "    </div>"
            } else if (tagType==8) {//时间框
              html = '<div class="tag-details__item" tagAttr="'+propertyInfo.tagArr+'" tagType="'+tagType+'" tagName="'+propertyInfo.name+'"  id="editDate_'+id+'">'+
                '<div class="tag-details__title">'+
                propertyInfo.name+
                '</div>'+
                '<div class="tag-details__tags tag-flex">'
              //获取已选标签
              let tagged = ''
              for (var j = 0; j < propertyInfoVos.length; j++) {
                let propertyInfoVo = propertyInfoVos[j]
                if (propertyInfo.tagArr == propertyInfoVo.tagArr){
                  tagged =  propertyInfoVo.value
                  tagged = tagged.substr(0,10)
                }
              }
              if (tagged != ''){
                html += '<div class="text-title customer_tag_date editDate_'+id+'">'+tagged+'</div>'
                // '<input type="date" name="date" class="input_editDate_'+id+'" value="'+tagged+'" hidden>'
              }else {
                html += '<div class="text-title text-disable customer_tag_date editDate_'+id+'">请选择'+propertyInfo.name+'</div>'
                // '<input type="text" name="date" class="input_editDate_'+id+'" value="" hidden>'
              }
              html += '<div class="right-arrow"></div>'+
                '</div>'+
                '</div>'
            }
            $(".tag-details").append(html)
            // 编辑按钮
            $('.tag-details__edit_'+id).click(function () {
              $('.float-layout').removeClass('hidden')
              let attr = this.getAttribute('attr')
              let tagAttr = this.getAttribute('tagAttr')
              chooseTagType = this.getAttribute('tagType')
              tagName = this.getAttribute('tagName')
              $(".title").html(tagName)
              tagcode = tagAttr
              $(".float-layout__content").html(appendHtml[attr])
              $('.input_radio').click(function(){
                $('input[type = radio]').parent('div').parent('div').children('img').hide()
                $(this).parent('div').parent('div').children('img').show()
                $(".select_tag_"+id).html($(this).val())
                $(".select_tag_"+id).removeClass('text-disable')
                $(".input_select_tag_"+id)[0].value=$(this).val()
                $('.float-layout').addClass('hidden')
              })
            })
            if (tagType == 5){
              $("input").blur()
              var rolldate = new Rolldate({
                el: '#editDate_'+id,
                // 年月日 时分秒
                format: 'YYYY-MM-DD',
                beginYear: 2000,
                endYear: 2100,
                lang: {
                  year: '',
                  month: '',
                  day: '',
                  confirm: '确定',
                  title: '日期'
                },
                confirm: function (date) {
                  rolldate.hide()
                  $(".editDate_"+id).html(date)
                  $(".editDate_"+id).removeClass('text-disable')
                  // $(".input_editDate_"+id)[0].value =  date
                  return false
                }
              })
            }else if (tagType == 8) {
              $("input").blur()
                var rolldate = new Rolldate({
                  el: '#editDate_'+id,
                  // 年月日 时分秒
                  format: 'YYYY-MM-DD hh:mm:ss',
                  beginYear: 2000,
                  endYear: 2100,
                  lang: {
                    year: '',
                    month: '',
                    day: '',
                    hour: '',
                    min: '',
                    sec: '',
                    confirm: '确定',
                    title: '时间'
                  },
                  confirm: function (date) {
                    rolldate.hide()
                    $(".editDate_"+id).html(date)
                    $(".editDate_"+id).removeClass('text-disable')
                    // $(".input_editDate_"+id)[0].value =  date
                    return false
                  }
                })
            }
            if (tagType == 6){
              $('.input_radio_'+id).click(function(){
                $(this).parent('div').children('span').removeClass("tag--seleted")
                $(this).addClass("tag--seleted")
                $(this).children('input').attr('checked',true)
              })
            }
          }
          $('.float-layout__mask').click(function () {
            $('.float-layout').addClass('hidden')
          })
        }
        $('.input_checkbox').click(function(){
          let checked = $(this).children('input').is(':checked')
          if (checked){
            $(this).children('input').attr('checked', false)
            $(this).removeClass("tag--seleted")
          }else {
            $(this).children('input').attr('checked', true)
            $(this).addClass("tag--seleted")
          }
        })
      } else {
        // 跳转错误页
        // 跳转错误页
        $(".customer-tag").hide()
        $(".save_customerTag").hide()
        $(".customer-errormsg").html(result.result)
        $(".customer-error").show()
      }
    })
  }
  // 保存会员标签
  $('.save_customerTag').click(function () {
    let detailsItem = $(".tag-details__item");
    let tagInfoList = []
    let tagMsgShow = []
    for (let i = 0; i < detailsItem.length; i++) {
      let tagMsg = {}
      let tagInfo = {}
      let detailsItemElement = detailsItem[i];
      let tagAttr = detailsItemElement.getAttribute("tagAttr");
      let tagName = detailsItemElement.getAttribute("tagName");
      let tagType = detailsItemElement.getAttribute("tagType");
      let inputs = detailsItemElement.getElementsByTagName('input');
      if (parseInt(tagType) == 1 || parseInt(tagType) == 2 || parseInt(tagType) == 3 || parseInt(tagType) == 4){
        if (inputs[0].value){
          tagMsg.tagValue = inputs[0].value
          tagMsg.tagCode = tagAttr
          tagInfoList.push(tagMsg)
          tagInfo.tagValue = inputs[0].value
          tagInfo.tagName = tagName
          tagInfo.tag_code = tagAttr
          tagMsgShow.push(tagInfo)
        }
      }else if (parseInt(tagType) == 5 || parseInt(tagType) == 8){
        let dateHtml = detailsItemElement.getElementsByClassName('customer_tag_date');
        if (dateHtml[0].textContent && dateHtml[0].textContent.indexOf("请选择") == -1) {
          tagMsg.tagValue = dateHtml[0].textContent
          tagMsg.tagCode = tagAttr
          tagInfoList.push(tagMsg)
          tagInfo.tagValue = dateHtml[0].textContent
          tagInfo.tagName = tagName
          tagInfo.tag_code = tagAttr
          tagMsgShow.push(tagInfo)
        }
      }else if (parseInt(tagType) == 6){
        for (let j = 0; j < inputs.length; j++) {
          if (inputs[j].checked){
            tagMsg.tagValue = inputs[j].value
            tagMsg.tagCode = tagAttr
            tagInfoList.push(tagMsg)
            tagInfo.tagValue = inputs[j].value
            tagInfo.tagName = tagName
            tagInfo.tag_code = tagAttr
            tagMsgShow.push(tagInfo)
          }
        }
      }else if (parseInt(tagType) == 7){
        let check_val = []
        for (let j = 0; j < inputs.length; j++) {
          if (inputs[j].checked){
            check_val.push(inputs[j].value)
          }
        }
        if (check_val.length > 0) {
          tagValue = check_val.join("|")
          tagMsg.tagValue = tagValue
          tagMsg.tagCode = tagAttr
          tagInfoList.push(tagMsg)
          tagInfo.tagValue = tagValue
          tagInfo.tagName = tagName
          tagInfo.tag_code = tagAttr
          tagMsgShow.push(tagInfo)
        }
      }
    }
    if (tagInfoList.length < 1){
      return
    }
    // 保存会员标签
    var data = {
      groupId: groupId,
      shopId: shopId,
      platfrom: platfrom,
      nick: nick,
      tagInfoList: tagInfoList
    }
    $.ajax({
      url: backstageURL() + '/guideCustomer/saveCustomerTag',
      type: 'post',
      dataType: 'JSON',
      data: JSON.stringify(data),
      method: "post",
      contentType: "application/json;charset=UTF-8",
      success: function (res) {
        if (res.success){
          for (let i = 0; i < tagMsgShow.length; i++) {
            let tagInfo = tagMsgShow[i]
            let hasClass = $('div').hasClass("customer_"+tagInfo.tag_code);
            if (hasClass){
              $(".customer_"+tagInfo.tag_code).html(tagInfo.tagName+":"+tagInfo.tagValue);
            } else {
              var html = '<div class="tag tag&#45;&#45;primary customer_'+tagInfo.tag_code+'">' + tagInfo.tagName + ':' + tagInfo.tagValue + '</div>'
              $(".tag-list").append(html)
            }
          }
          $(".tag-details").html('')
          getGroupTag()
          $(".tag-list--nodata").addClass('hide')
          $(".tag-list").removeClass('hide')
          $('.float-layout').addClass('hidden')
          $(".float-layout__content").html('')
        }else {
          $(".customer-tag").hide()
          $(".save_customerTag").hide()
          $(".customer-errormsg").html(res.msg)
          $(".customer-error").show()
        }
      },
      error: function (res) {
        debugger
      }
    });
  })
  function ajax(url, data, params) {
    data = JSON.stringify(data)
    return new Promise(function (resolve, reject) {
      $.ajax({
        url: url,
        type: params && params.type || 'post',
        dataType: params && params.dataType || 'JSON',
        data: data,
        method: "post",
        contentType: "application/json;charset=UTF-8",
        success: function (res) {
          resolve(res)
        },
        error: function (res) {
          $(".fail").show();
          $('.fail__text').html(result.msg);
        }
      });
    });
  }
  function checkParams(params) {
    if (params == null || params == ''){
      return '--'
    }else {
      return params
    }
  }
  var getPar = function (name) {
    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')
    var r = window.location.search.substr(1).match(reg)
    if (r != null) {
      return decodeURIComponent(r[2])
    }
    return null
  }

  var rolldate = new Rolldate({
    el: '#editDate',
    format: 'YYYY-MM-DD',
    beginYear: 2000,
    endYear: 2100,
    lang: {
      year: '',
      month: '',
      day: '',
      confirm: '保存',
      title: '标题'
    },
    confirm: function (date) {
      rolldate.hide()
      return false
    }
  })
</script>
</body>
</html>
